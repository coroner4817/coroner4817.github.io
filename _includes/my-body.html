<script type="text/javascript">
function updateFavicon() {
    var favicon = undefined;
    var nodeList = document.getElementsByTagName("link");
    for (var i = 0; i < nodeList.length; i++)
    {
        if((nodeList[i].getAttribute("rel") == "icon")||(nodeList[i].getAttribute("rel") == "shortcut icon"))
        {
            nodeList[i].setAttribute("href", "/assets/img/framework/favicon-96x96.png");
        }
    }
}

function socialIcon() {
  var sidebar_tags = document.getElementById("_drawer").getElementsByTagName("*");
  for(var i = 0; i < sidebar_tags.length; i++) {
    if(sidebar_tags[i].className == "icon-github") {
      sidebar_tags[i].style.color = '#000000';
    } else if (sidebar_tags[i].className == "icon-linkedin2") {
      sidebar_tags[i].style.color = '#0072b1';
    } else if (sidebar_tags[i].className == "icon-youtube") {
      sidebar_tags[i].style.color = '#c4302b';
    }
  }
}

function darkMode() {
  var all_tags = document.getElementsByTagName("*");
  var sidebar_tags = document.getElementById("_drawer").getElementsByTagName("*");

  var i = all_tags.length;
  while ( i-- ) {
    var notDark = false;
    for(var j = 0; j < sidebar_tags.length; j++) {
      if(sidebar_tags[j].isSameNode(all_tags[i])) {
        notDark = true;
        break;
      }
    }
    if(notDark) {
      if(all_tags[i].className == "icon-github") {
        all_tags[i].style.color = '#000000';
      } else if (all_tags[i].className == "icon-linkedin2") {
        all_tags[i].style.color = '#0072b1';
      } else if (all_tags[i].className == "icon-youtube") {
        all_tags[i].style.color = '#c4302b';
      } else {
        all_tags[i].style.color = '#B1B1B1';
      }
      continue;
    }
    if(all_tags[i].id != "darkmode_button" && all_tags[i].id != "darkmode_button_icon") {
      all_tags[i].style.backgroundColor = '#121212';
      all_tags[i].style.color = '#B1B1B1';
    }
  }

  var meta = document.createElement('meta');
  meta.setAttribute('name', 'darkmode_meta');
  meta.content = "1";
  document.getElementsByTagName('head')[0].appendChild(meta);
}

updateFavicon();
socialIcon();

var url = new URL(window.location.href);
var usedarkmode1 = url.searchParams.get("darkmode");
var usedarkmode2 = "0";
if(document.getElementsByName('darkmode_meta').length != 0) {
  usedarkmode2 = document.getElementsByName('darkmode_meta')[0].getAttribute('content');
}
if(usedarkmode1 == "1" || usedarkmode2 == "1") {
  darkMode();
}

// TODO: darkmode bugs:
// - on darkmode, if go a new link and refresh, then we lose all the darkmode context
// - sometimes not all text get darkmode updated, this is because the function in this script
//   is not run again when click on a new jekyll link

// javascript is garabage

</script>